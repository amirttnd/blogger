<!DOCTYPE html>
<html ng-app="techBlogger" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head lang="en">
    <meta charset="UTF-8"/>
    <meta th:replace="layout/layout::viewport"/>
    <link rel="stylesheet" th:href="@{/css/jsTree/themes/default/style.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
    <link rel="stylesheet" th:href="@{/css/font-awesome-4.7.0/css/font-awesome.min.css}" type="text/css"/>

    <link rel="stylesheet" th:href="@{/css/admin/styleSheet.css}" type="text/css"/>
    <link rel="stylesheet" th:href="@{/css/media.css}" type="text/css"/>


    <script type="text/javascript" th:src="@{/js/jquery-3.3.1.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jstree.min.v3.3.4.js}"></script>

    <script type="text/javascript" th:src="@{/js/angular/library/angular1.6.4.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/angular/library/ngJsTree.js}"></script>
    <script type="text/javascript" th:src="@{/js/angular/library/ngJsTree.js}"></script>
    <script type="text/javascript" th:src="@{/js/angular/library/angular-resource.min.js}"></script>


    <script type="text/javascript" th:src="@{/js/angular/module/techBlogger.js}"></script>
    <script type="text/javascript" th:src="@{/js/angular/category/category.js}"></script>
    <script type="text/javascript" th:src="@{/js/angular/category/category.controller.js}"></script>

    <script th:src="@{/js/jstree.min.v3.3.4.js}" type="text/javascript"></script>

    <script th:src="@{/js/bootstrap.min.js}"></script>

    <script type="text/javascript" th:src="@{/js/ckeditor/ckeditor.js}"></script>
    <script type="text/javascript" th:src="@{/js/application.js}"></script>

    <title></title>
</head>
<body>
<div th:replace="layout/layout::adminHeader"></div>
<div class="container" ng-controller="CategoryController as categoryCtrl">
    <h3 class="category-heading">Category Tree</h3>

    <div ng-cloak="">
        <ul class="tree">
            <li class="node" ng-repeat="node in categoryCtrl.tree track by $index">

                <span class="text" ng-class="{disabled: !node.category.active}">
                    <a><i class="fa fa-flash"></i>{{node.category.name}}</a>
                    <span class="actions">
                        <i class="fa fa-plus" ng-click="categoryCtrl.allowAddToChild(node)"></i>
                        <i class="fa fa-edit"></i>
                        <i class="fa"
                           ng-class="{'fa-toggle-on':node.category.active,'fa-toggle-off':!node.category.active}"
                           data-ng-click="categoryCtrl.toggle(node.category)"></i>
                    </span>
                </span>
                <ul class="child" ng-if="node.subCategories">
                    <li class="node" ng-repeat="subCategory in node.subCategories">
                        <span class="text" ng-class="{disabled: !subCategory.active}">
                            <a href="">
                                <i class="fa fa-flash"></i><span>{{subCategory.name}}</span>
                            </a>
                            <span class="actions" ng-if="subCategory.id">
                                <i class="fa fa-edit"></i>
                                <i class="fa"
                                   ng-class="{'fa-toggle-on':subCategory.active,'fa-toggle-off':!subCategory.active}"

                                   data-ng-click="categoryCtrl.toggle(subCategory)"></i>
                            </span>
                        </span>
                    </li>
                    <li class="node" ng-show="node.canAddChild">
                        <span class="text">
                            <i class="fa fa-flash"></i>
                            <input class="category-box" ng-model="node.name"
                                   type="text" placeholder="Enter category name"/>
                            <span class="actions">
                                <i class="fa fa-save"
                                   data-ng-click="categoryCtrl.addChild(node,node.category.id)">
                                </i>
                                <i class="fa fa-close"></i>
                            </span>
                        </span>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
</div>
</body>
</html>